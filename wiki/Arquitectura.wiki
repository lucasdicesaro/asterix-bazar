#summary Detalles Técnicos
#labels Arquitectura,Threads

== Introducción ==

Esta sección explica cómo esta pensada la aplicación desde el punto de vista de la arquitectura. En el mismo, se tuvieron que desarrollar diferentes técnicas para afrontar diversos problemas que se presentaron durante la etapa de diseño y desarrollo. Tales como, la transaccionalidad y la identificación de mensajes de manera unívoca mediante timestamp en sistemas distribuidos.

== Detalles Técnicos ==


=== Threading ===

Este trabajo es una aplicación basada en multi-threading, donde cada thread es responsable de una tarea. Los threads son los siguientes:
  * Un thread *Listener*, que es el responsable de aceptar nuevas conexiones, darlas de baja, y recibir paquetes de provenientes de la red.
  * Un thread *Router*, que es el responsable de perdir conexiones a sus dos vecinos asignados (mediante el archivo de configuración) y de enviar los paquetes a la red.
  * Un thread *Keyboard*, se responsabiliza de tomar la entrada del usuario. El detalle de este thread se explica en otra sección.
  * Un thread *Logic*, que es el responsable de todo el negocio de la aplicación. Es el úcleo de la aplición. El mismo interpreta los mensajes provenientes del _Listener_, toma decisiones y arma nuevos mensajes para enviarle al _Router_. 


=== Timestamp ===

Un Comprador publica su necesidad de compra mediante un LOOKUP. Cuando un Vendedor detecta, que sus productos son requeridos por algun comerciante, el mismo lanza un REPLY por el mismo camino por donde vino el LOOKUP.

==== Múltiples respuestas =====
El problema aparece cuando hay mas de un Vendedor que responde a ese pedido, pues el Comprador va a recibir mas de un REPLY. Seria un error iniciar la negociación con ambos Vendedores. 

Otro problema aparece cuando llega una respuesta tardia. Ya habiendo hecho la negociación, al Comprador le puede llegar un REPLY e iniciar una nueva negociación

Por eso, para solucionar el problema de los paquetes 